<!doctype html>

<head>
	<meta charset="utf-8">
	<script>
		// TODO: create a handler
		function setSearchEngine() {
			const actions = {
				google: "https://www.google.com/search",
				duckDuckGo: "https://duckduckgo.com/",
				bing: "https://www.bing.com/search",
				ask: "https://www.ask.com/web",
			};

			const form = document.querySelector('form');
			const searchEngineSelected = document.querySelector("input[name=engine]:checked");

			let query = document.getElementById('q');
			let errorBox = document.getElementById('error-box');
			let errorMsg = document.getElementById('error-msg');
			
			if (query.value === '') {
				errorBox.style.visibility = 'visible';
				errorMsg.innerHTML = "Oops! You didn't enter anything to search for.";
				event.preventDefault();
			} else if (!searchEngineSelected) {
				errorBox.style.visibility = 'visible';
				errorMsg.innerHTML = 'Oops! Which search engine do you want to use?';
				event.preventDefault();
			} else {
				errorBox.style.visibility = 'hidden';
			}

			let url = actions[searchEngineSelected.value];
			form.action = url;
		};


    window.addEventListener("load", function(){
        // TODO: register the handler
		const form = document.querySelector('form');
		form.addEventListener('submit', setSearchEngine);
    });
	</script>
</head>

<body>

	<form action="" id="searchForm" target="_blank">
    <!-- TODO: add form elements -->
		<input type="text" class="q" id="q" name="q" />
		<label><input type="radio" name="engine" value="google"/> Google</label>
        <label><input type="radio" name="engine" value="duckDuckGo"/> DuckDuckGo</label>
        <label><input type="radio" name="engine" value="bing"/> Bing</label>
		<label><input type="radio" name="engine" value="ask"/> Ask</label>
		<button id="submit" value="Go">Go!</button>
	</form>

	<div id="error-box">
		<p id="error-msg"></p>
	</div>

</body>